---
- name: checkout Xblocks repo
  git:
    repo: "{{ BDU_PORTAL_XBLOCKS_REPO }}"
    dest: "{{ BDU_PORTAL_XBLOCKS_PATH }}"
    accept_hostkey: yes
    key_file: "{{ bdu_portal_deploy_key_path }}"
    version: "{{ bdu_portal_xblocks_version }}"
  tags:
    - install:app-requirements

- name: install xblocks
  pip:
    name: "file://{{ BDU_PORTAL_XBLOCKS_PATH }}/{{ item }}"
    executable: "{{ bdu_portal_edxapp_pip_path }}"
  with_items: "{{ BDU_PORTAL_ALLOWED_XBLOCKS }}"
  tags:
    - install:app-requirements
