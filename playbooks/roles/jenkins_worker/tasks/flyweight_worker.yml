---
# Clone the edx-platform repo for speedier future use.
# A couple notes:
# 1) This is done for the other workers in the test_build_server role,
#    which is not intuitive and should probably be refactored.
# 2) Flow jobs really should not need to clone the repo, but
#    it would be some work to refactor. See TE-2333.

- name: Create a shallow clone of the edx-platform repo
  git:
    repo: "https://github.com/edx/edx-platform.git"
    dest: "{{ jenkins_home }}/edx-platform-clone"
    version: "master"
  become_user: "{{ jenkins_user }}"
