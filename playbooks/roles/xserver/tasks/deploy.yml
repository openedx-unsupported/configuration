- name: stop xserver
  service: name=xserver state=stopped
  tags:
  - deploy

- name: checkout code
  git: dest={{ xserver_code_dir }} repo={{ xserver_source_repo }} version={{ xserver_version }}
  tags:
  - deploy

- name: install requirements
  pip: requirements="{{ xserver_requirements_file }}" virtualenv="{{ venv_dir }}" state=present
  tags:
  - deploy

- name: install sandbox requirements
  pip: requirements="{{ xserver_requirements_file }}" virtualenv="{{ xserver_sandbox_venv_dir }}" state=present
  tags:
  - deploy
  tags:
  - deploy

- name: start xserver
  service: name=xserver state=started
  tags:
  - deploy
